#!/usr/bin/env bash

echo "Updating dependencies..."
echo ""

STEP=0

function run_step() {
  STEP=$((STEP+1))
  echo "[$STEP] - $1..."

  local start=`date +%s`
  $2
  local end=`date +%s`
  local runtime=$((end-start))

  echo "[$STEP] - $1...done in $runtime sec"
  echo ""
}

# brew
run_step "brew update" "brew update"
run_step "brew upgrade" "brew upgrade"

# tmux
run_step "clanup tmux plugins" "$HOME/.tmux/plugins/tpm/bin/clean_plugins"
run_step "update tmux plugins" "$HOME/.tmux/plugins/tpm/bin/update_plugins all"


# npm
run_step "set node to lts" "$HOME/.nvm/nvm.sh install --lts"
run_step "set node to lts" "$HOME/.nvm/nvm.sh install-latest-npm"
run_step "update npm" "npm update -g"

# bun
run_step "upgrade bun" "bun upgrade"

# deno
run_step "upgrade deno" "deno upgrade"

